<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Wisdom - Êó•Êõø„Çè„ÇäÂêçË®Ä</title>
    
    <meta name="color-scheme" content="light">
    <style>
        /* „ÉÄ„Éº„ÇØ„É¢„Éº„ÉâÂº∑Âà∂ÁÑ°ÂäπÂåñ */
        :root {
            color-scheme: light !important;
        }
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
            color: #333 !important;
        }
        .quote-text-english {
            color: #333 !important;
        }
        .quote-text-japanese {
            color: #666 !important;
        }
        .quote-author {
            color: #666 !important;
        }
        .quote-container {
            background: rgba(255, 255, 255, 0.95) !important;
            color: #333 !important;
        }
        .btn {
            color: white !important;
        }
        
        /* „ÉÄ„Éº„ÇØ„É¢„Éº„ÉâÊôÇ„ÇÇÂº∑Âà∂ÁöÑ„Å´„É©„Ç§„Éà„É¢„Éº„Éâ */
        @media (prefers-color-scheme: dark) {
            body {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
                color: #333 !important;
            }
            .quote-container {
                background: rgba(255, 255, 255, 0.95) !important;
                color: #333 !important;
            }
            .quote-text-english,
            .quote-text-japanese,
            .quote-author {
                color: #333 !important;
            }
        }
    </style>
    
    <!-- PWAË®≠ÂÆö -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Daily Wisdom">
    <link rel="apple-touch-icon" href="/icon-192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icon-192.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icon-192.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Hiragino Kaku Gothic ProN', 'Yu Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            color: #333;
            overflow-x: hidden;
        }
        
        .app-header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .app-title {
            color: white;
            font-size: 24px;
            font-weight: 300;
            margin-bottom: 5px;
        }
        
        .app-subtitle {
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
        }
        
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
            text-align: center;
        }
        
        .date-display {
            background: rgba(255, 255, 255, 0.9);
            padding: 12px 24px;
            border-radius: 25px;
            margin-bottom: 30px;
            font-size: 16px;
            font-weight: 500;
            color: #555;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        
        .quote-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 40px 30px;
            max-width: 600px;
            width: 100%;
            margin-bottom: 30px;
            box-shadow: 0 8px 40px rgba(0, 0, 0, 0.15);
            transform: translateY(0);
            transition: transform 0.3s ease;
        }
        
        .quote-container:hover {
            transform: translateY(-5px);
        }
        
        .quote-text-english {
            font-size: 22px;
            line-height: 1.6;
            color: #333;
            margin-bottom: 15px;
            font-weight: 500;
            position: relative;
            font-family: 'Georgia', serif;
            font-style: italic;
        }
        
        .quote-text-english::before {
            content: '"';
            font-size: 48px;
            color: #667eea;
            position: absolute;
            left: -15px;
            top: -10px;
            font-family: serif;
        }
        
        .quote-text-english::after {
            content: '"';
            font-size: 48px;
            color: #667eea;
            position: absolute;
            right: -15px;
            bottom: -30px;
            font-family: serif;
        }
        
        .quote-text-japanese {
            font-size: 17px;
            line-height: 1.5;
            color: #666;
            margin-bottom: 20px;
            font-weight: 400;
            padding: 15px;
            background: rgba(103, 126, 234, 0.1);
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }
        
        .quote-author {
            font-size: 16px;
            color: #666;
            font-style: italic;
            margin-top: 15px;
        }
        
        .loading {
            display: none;
            color: white;
            font-size: 18px;
        }
        
        .spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .footer {
            background: rgba(0, 0, 0, 0.1);
            padding: 20px;
            text-align: center;
            color: rgba(255, 255, 255, 0.7);
            font-size: 12px;
        }
        
        @media (max-width: 768px) {
            .quote-container {
                padding: 30px 20px;
                margin: 0 10px 30px;
            }
            
            .quote-text-japanese {
                font-size: 16px;
            }
            
            .quote-text-english {
                font-size: 20px;
            }
            
            .quote-text-english::before,
            .quote-text-english::after {
                font-size: 36px;
            }
        }
    </style>
</head>
<body>
    <div class="app-header">
        <h1 class="app-title">Daily Wisdom</h1>
        <p class="app-subtitle">Daily inspiration with Japanese translation</p>
    </div>
    
    <div class="main-content">
        <div class="date-display" id="dateDisplay"></div>
        
        <div class="quote-container" id="quoteContainer">
            <div class="loading" id="loading">
                <div class="spinner"></div>
                Loading today's wisdom...
            </div>
            <div class="quote-text-english" id="quoteTextEnglish"></div>
            <div class="quote-text-japanese" id="quoteTextJapanese"></div>
            <div class="quote-author" id="quoteAuthor"></div>
        </div>
        
        <div class="action-buttons">
            <button class="btn" onclick="generateNewQuote()">‚ú® New Quote</button>
            <button class="btn" onclick="shareQuote()">üì± Share</button>
        </div>
    </div>
    
    <div class="footer">
        <p>¬© 2025 Daily Wisdom - Inspiring quotes with Japanese translation</p>
    </div>

    <script>
        // PWAÈñ¢ÈÄ£„ÅÆÊ©üËÉΩ
        let deferredPrompt;
        let isInstalled = false;

        // Service WorkerÁôªÈå≤
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('SW registered: ', registration);
                    })
                    .catch(registrationError => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }

        // PWA„Ç§„É≥„Çπ„Éà„Éº„É´„Éó„É≠„É≥„Éó„Éà
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            showInstallButton();
        });

        // „Ç§„É≥„Çπ„Éà„Éº„É´„Éú„Çø„É≥Ë°®Á§∫
        function showInstallButton() {
            const installBtn = document.createElement('button');
            installBtn.textContent = 'üì± Install App';
            installBtn.className = 'btn install-btn';
            installBtn.onclick = installApp;
            
            const buttonContainer = document.querySelector('.action-buttons');
            buttonContainer.appendChild(installBtn);
        }

        // „Ç¢„Éó„É™„Ç§„É≥„Çπ„Éà„Éº„É´
        function installApp() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('User accepted the A2HS prompt');
                    }
                    deferredPrompt = null;
                });
            }
        }

        // „Éó„ÉÉ„Ç∑„É•ÈÄöÁü•Ë®±ÂèØ
        function requestNotificationPermission() {
            if ('Notification' in window) {
                Notification.requestPermission().then(permission => {
                    if (permission === 'granted') {
                        console.log('Notification permission granted');
                        scheduleNotification();
                    }
                });
            }
        }

        // ÈÄöÁü•„Çπ„Ç±„Ç∏„É•„Éº„É´ÔºàÊØéÊó•ÂçàÂâç9ÊôÇÔºâ
        function scheduleNotification() {
            if ('serviceWorker' in navigator && 'PushManager' in window) {
                // ÂÆüÈöõ„ÅÆ„Éó„ÉÉ„Ç∑„É•ÈÄöÁü•„ÅØÂæå„ÅßÂÆüË£Ö
                console.log('Push notifications will be implemented');
            }
        }

        // ÂêçË®Ä„ÅÆ„Éá„Éº„Çø„Éô„Éº„ÇπÔºàËã±Ë™ûÔºãÊó•Êú¨Ë™ûË®≥Ôºâ
        const quotes = [
            {
                english: "Success is not final, failure is not fatal: it is the courage to continue that counts.",
                japanese: "ÊàêÂäü„ÅØÊúÄÁµÇÁöÑ„Å™„ÇÇ„ÅÆ„Åß„ÅØ„Å™„Åè„ÄÅÂ§±Êïó„ÅØËá¥ÂëΩÁöÑ„Å™„ÇÇ„ÅÆ„Åß„ÅØ„Å™„ÅÑ„ÄÇÂ§ßÂàá„Å™„ÅÆ„ÅØÁ∂ö„Åë„ÇãÂãáÊ∞ó„Åß„ÅÇ„Çã„ÄÇ",
                author: "Winston Churchill"
            },
            {
                english: "Your time is limited, so don't waste it living someone else's life.",
                japanese: "„ÅÇ„Å™„Åü„ÅÆÊôÇÈñì„ÅØÈôê„Çâ„Çå„Å¶„ÅÑ„Çã„ÄÇ„Å†„Åã„Çâ‰ªñ‰∫∫„ÅÆ‰∫∫Áîü„ÇíÁîü„Åç„Çã„Åì„Å®„ÅßÊôÇÈñì„ÇíÁÑ°ÈßÑ„Å´„Åó„Å¶„ÅØ„ÅÑ„Åë„Å™„ÅÑ„ÄÇ",
                author: "Steve Jobs"
            },
            {
                english: "The future depends on what you do today.",
                japanese: "Êú™Êù•„ÅØ„ÄÅ‰ªäÊó•‰Ωï„Çí„Åô„Çã„Åã„Å´„Åã„Åã„Å£„Å¶„ÅÑ„Çã„ÄÇ",
                author: "Mahatma Gandhi"
            },
            {
                english: "A journey of a thousand miles begins with a single step.",
                japanese: "ÂçÉÈáå„ÅÆÈÅì„ÇÇ‰∏ÄÊ≠©„Åã„Çâ„ÄÇÂ∞è„Åï„Å™‰∏ÄÊ≠©„ÅåÂ§ß„Åç„Å™Â§âÂåñ„ÇíÁîü„ÅøÂá∫„Åô„ÄÇ",
                author: "Lao Tzu"
            },
            {
                english: "The only way to do great work is to love what you do.",
                japanese: "ÂÅâÂ§ß„Å™‰ªï‰∫ã„Çí„Åô„ÇãÂîØ‰∏Ä„ÅÆÊñπÊ≥ï„ÅØ„ÄÅËá™ÂàÜ„ÅÆ‰ªï‰∫ã„ÇíÊÑõ„Åô„Çã„Åì„Å®„Åß„ÅÇ„Çã„ÄÇ",
                author: "Steve Jobs"
            },
            {
                english: "Whether you think you can or you think you can't, you're right.",
                japanese: "„Åß„Åç„Çã„Å®ÊÄù„ÅÜ„Åã„ÄÅ„Åß„Åç„Å™„ÅÑ„Å®ÊÄù„ÅÜ„Åã„ÄÇ„Åù„Çå„Åå„ÅÇ„Å™„Åü„ÅÆÈÅãÂëΩ„ÇíÊ±∫„ÇÅ„Çã„ÄÇ",
                author: "Henry Ford"
            },
            {
                english: "Today is the first day of the rest of your life.",
                japanese: "‰ªäÊó•„Å®„ÅÑ„ÅÜÊó•„ÅØ„ÄÅÊÆã„Çä„ÅÆ‰∫∫Áîü„ÅÆÊúÄÂàù„ÅÆÊó•„Åß„ÅÇ„Çã„ÄÇ",
                author: "Abbie Hoffman"
            },
            {
                english: "All our dreams can come true, if we have the courage to pursue them.",
                japanese: "Â§¢„ÇíËøΩ„ÅÑÁ∂ö„Åë„ÇãÂãáÊ∞ó„Åå„ÅÇ„Çå„Å∞„ÄÅ„Åô„Åπ„Å¶„ÅÆÂ§¢„ÅØÂÆüÁèæ„Åô„Çã„ÄÇ",
                author: "Walt Disney"
            },
            {
                english: "It is during our darkest moments that we must focus to see the light.",
                japanese: "ÊúÄ„ÇÇÊöó„ÅÑÁû¨Èñì„Å´„Åì„Åù„ÄÅÂÖâ„ÇíË¶ã„Å§„Åë„Çã„Åì„Å®„Å´ÈõÜ‰∏≠„Åó„Å™„Åë„Çå„Å∞„Å™„Çâ„Å™„ÅÑ„ÄÇ",
                author: "Aristotle"
            },
            {
                english: "It is not the strongest of the species that survives, but the most adaptable to change.",
                japanese: "Áîü„ÅçÊÆã„Çã„ÅÆ„ÅØÊúÄ„ÇÇÂº∑„ÅÑÁ®Æ„Åß„ÅØ„Å™„Åè„ÄÅÂ§âÂåñ„Å´ÊúÄ„ÇÇÈÅ©Âøú„Åß„Åç„ÇãÁ®Æ„Åß„ÅÇ„Çã„ÄÇ",
                author: "Charles Darwin"
            },
            {
                english: "Life is 10% what happens to you and 90% how you react to it.",
                japanese: "‰∫∫Áîü„ÅØ10%„ÅÆÂá∫Êù•‰∫ã„Å®90%„ÅÆÂØæÂøú„ÅÆ‰ªïÊñπ„ÅßÊ±∫„Åæ„Çã„ÄÇ",
                author: "Charles R. Swindoll"
            },
            {
                english: "The best time to plant a tree was 20 years ago. The second best time is now.",
                japanese: "Êú®„ÇíÊ§ç„Åà„Çã„ÅÆ„Å´ÊúÄÈÅ©„Å™ÊôÇÊúü„ÅØ20Âπ¥Ââç„Å†„Å£„Åü„ÄÇÊ¨°„Å´ËâØ„ÅÑÊôÇÊúü„ÅØ‰ªä„Åß„ÅÇ„Çã„ÄÇ",
                author: "Chinese Proverb"
            },
            {
                english: "Don't put off until tomorrow what you can do today.",
                japanese: "‰ªäÊó•„Åß„Åç„Çã„Åì„Å®„ÇíÊòéÊó•„Å´Âª∂„Å∞„Åó„Å¶„ÅØ„ÅÑ„Åë„Å™„ÅÑ„ÄÇ",
                author: "Benjamin Franklin"
            },
            {
                english: "Every man is the architect of his own fortune.",
                japanese: "‰∫∫„ÅØË™∞„Åß„ÇÇ„ÄÅËá™ÂàÜ„ÅÆÈÅãÂëΩ„ÅÆÂª∫ÁØâÂÆ∂„Åß„ÅÇ„Çã„ÄÇ",
                author: "Sallust"
            },
            {
                english: "The road to success is always under construction.",
                japanese: "ÊàêÂäü„Å∏„ÅÆÈÅì„ÅØ„ÄÅÂ∏∏„Å´Âª∫Ë®≠‰∏≠„Åß„ÅÇ„Çã„ÄÇ",
                author: "Lily Tomlin"
            }
        ];

        // Êó•‰ªò„ÇíË°®Á§∫
        function updateDate() {
            const now = new Date();
            const options = { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                weekday: 'long'
            };
            document.getElementById('dateDisplay').textContent = 
                now.toLocaleDateString('ja-JP', options);
        }

        // Êó•Êõø„Çè„Çä„ÅÆÂêçË®Ä„ÇíÂèñÂæó
        function getDailyQuote() {
            const today = new Date();
            const dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
            return quotes[dayOfYear % quotes.length];
        }

        // ÂêçË®Ä„ÇíË°®Á§∫
        function displayQuote(quote) {
            document.getElementById('quoteTextEnglish').textContent = quote.english;
            document.getElementById('quoteTextJapanese').textContent = quote.japanese;
            document.getElementById('quoteAuthor').textContent = `‚Äî ${quote.author}`;
        }

        // Êñ∞„Åó„ÅÑÂêçË®Ä„ÇíÁîüÊàê
        function generateNewQuote() {
            const loading = document.getElementById('loading');
            const quoteTextEnglish = document.getElementById('quoteTextEnglish');
            const quoteTextJapanese = document.getElementById('quoteTextJapanese');
            const quoteAuthor = document.getElementById('quoteAuthor');
            
            // „É≠„Éº„Éá„Ç£„É≥„Ç∞Ë°®Á§∫
            loading.style.display = 'block';
            quoteTextEnglish.style.display = 'none';
            quoteTextJapanese.style.display = 'none';
            quoteAuthor.style.display = 'none';
            
            // 1.5ÁßíÂæå„Å´Êñ∞„Åó„ÅÑÂêçË®Ä„ÇíË°®Á§∫ÔºàAPIÂëº„Å≥Âá∫„Åó„ÅÆÊ®°Êì¨Ôºâ
            setTimeout(() => {
                const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
                displayQuote(randomQuote);
                
                loading.style.display = 'none';
                quoteTextEnglish.style.display = 'block';
                quoteTextJapanese.style.display = 'block';
                quoteAuthor.style.display = 'block';
            }, 1500);
        }

        // ÂêçË®Ä„Çí„Ç∑„Çß„Ç¢
        function shareQuote() {
            const quoteTextEnglish = document.getElementById('quoteTextEnglish').textContent;
            const quoteTextJapanese = document.getElementById('quoteTextJapanese').textContent;
            const quoteAuthor = document.getElementById('quoteAuthor').textContent;
            const shareText = `"${quoteTextEnglish}"\n\n${quoteTextJapanese}\n\n${quoteAuthor}\n\n#DailyWisdom #Quotes #Inspiration`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Daily Wisdom',
                    text: shareText,
                    url: window.location.href
                });
            } else {
                // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØÔºö„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å´„Ç≥„Éî„Éº
                navigator.clipboard.writeText(shareText).then(() => {
                    alert('Quote copied to clipboard!');
                });
            }
        }

        // „Ç¢„Éó„É™„ÅÆÂàùÊúüÂåñ
        function initApp() {
            updateDate();
            const dailyQuote = getDailyQuote();
            displayQuote(dailyQuote);
            
            // PWAÊ©üËÉΩÂàùÊúüÂåñ
            setTimeout(() => {
                requestNotificationPermission();
            }, 3000); // 3ÁßíÂæå„Å´ÈÄöÁü•Ë®±ÂèØ„ÇíÊ±Ç„ÇÅ„Çã
        }

        // „Éö„Éº„Ç∏„É≠„Éº„ÉâÊôÇ„Å´ÂàùÊúüÂåñ
        window.addEventListener('load', initApp);
    </script>
</body>
</html>
